(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{370:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[s._v("#")]),s._v(" Babel")]),s._v(" "),a("h2",{attrs:{id:"起因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#起因"}},[s._v("#")]),s._v(" 起因:")]),s._v(" "),a("p",[s._v("对于前端搬砖小工在写一个项目为了使 "),a("strong",[s._v("新语法(ES6,ES7..)")]),s._v(" 兼容 "),a("strong",[s._v("低版本浏览器")]),s._v(" ，都会用到 "),a("strong",[s._v("Babel")]),s._v(" 来转，但使用一些实例的方法 "),a("strong",[s._v("(Array.includes、Object.assign、async..)")]),s._v("，虽然配置Babel但还会报错,下面就来看看解决方法：")]),s._v(" "),a("h2",{attrs:{id:"babel-作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-作用"}},[s._v("#")]),s._v(" Babel 作用:")]),s._v(" "),a("p",[a("strong",[s._v("Babel")]),s._v("是前端的一把利器，使我们可以使用最新JavaScript语法开发，但它不能转化新的API及实例对象的新方法，我们需要使用"),a("strong",[s._v("polyfill")]),s._v("来达到目的")]),s._v(" "),a("h2",{attrs:{id:"_1-全局引入-babel-polyfill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-全局引入-babel-polyfill"}},[s._v("#")]),s._v(" 1. 全局引入 babel-polyfill")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下载（生产环境下dependencies）")]),s._v("\n\tnpm install babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("polyfill "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-polyfill'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// require('babel-polyfill')")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果使用webpack构建的项目可以让babel-polyfill作为入口添加到entry中")]),s._v("\n\tentry："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tapp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t         "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-polyfill"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t         path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("strong",[s._v("优点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[s._v("引入一次，所有高级语法、API、实例方法，随你使用")])])]),s._v(" "),a("p",[a("strong",[s._v("缺点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("使用后 polyfill 构建并 uglify 后的大小为 98k，gzip 后为32.6k，对于性能消耗太大，性能与使用是否方便的根据自己的需要权衡；")])]),s._v(" "),a("li",[a("p",[s._v("babel-polyfill 非常暴力，因为它是一个整体，把所有方法都加到原型链上,污染全局变量")])]),s._v(" "),a("li",[a("p",[s._v("在你的整个应用里只能引用一次babel-polyfill。多次引用babel-polyfill会引起报错，因为它可能导致全局冲突和其他难以追踪的问题")])])])]),s._v(" "),a("h2",{attrs:{id:"_2-引入core-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-引入core-js"}},[s._v("#")]),s._v(" 2. 引入core-js")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("因为"),a("strong",[s._v("core-js")]),s._v(" 里实现了大部分 "),a("strong",[s._v("e6、es7")]),s._v(" 的高级语法"),a("br"),s._v(" "),a("strong",[s._v("babel-polyfill")]),s._v("也是集成"),a("strong",[s._v("core-js")]),s._v("和"),a("strong",[s._v("regenerator")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下载")]),s._v("\n\tnpm install core"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("js\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全量引入")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'core-js'")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 差量引入，就是你需要那个你引用那个")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'core-js/fn/array/includes'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// import 'core-js/library/fn/array/includes'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("core-js使用文档")])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("h4",{attrs:{id:"core-js-npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core-js-npm"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://www.npmjs.com/package/core-js",title:"core-js  npm",target:"_blank",rel:"noopener noreferrer"}},[s._v("core-js  npm"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"core-js-github"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core-js-github"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://github.com/zloirock/core-js",title:"core-js github",target:"_blank",rel:"noopener noreferrer"}},[s._v("core-js github"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("strong",[s._v("优点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[s._v("相对于babel-polyfill，按需引入。")])])]),s._v(" "),a("p",[a("strong",[s._v("缺点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[s._v("手动去引相应的依赖")])])]),s._v(" "),a("h2",{attrs:{id:"_3-使用babel-runtime和babel-plugin-transform-runtime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用babel-runtime和babel-plugin-transform-runtime"}},[s._v("#")]),s._v(" 3. 使用babel-runtime和babel-plugin-transform-runtime")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[a("strong",[s._v("babel-plugin-transform-runtime")]),s._v("的polyfill就是依赖"),a("strong",[s._v("babel-runtime")]),s._v("，两个结合可以实现除了实例化的方法外高级用法都可以使用(比如 async)")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下载(babel-runtime生产环境下dependencies)")]),s._v("\n\tnpm install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("plugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("transform"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("runtime\n\tnpm install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("runtime\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用在 .babelrc 文件中")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"transform-runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"helpers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"polyfill"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"regenerator"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"moduleName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-runtime"')]),s._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://babeljs.io/docs/en/babel-plugin-transform-runtime/",title:"具体的属性解释",target:"_blank",rel:"noopener noreferrer"}},[s._v("babel-plugin-transform-runtime 配置"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("优点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[s._v("不会污染全局变量，帮我们引入静态方法和一些内建模块")])])]),s._v(" "),a("p",[a("strong",[s._v("缺点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[s._v("实例方法是不会做转换的(如：Array.includes..)")])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("重点：")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ol",[a("li",[s._v("如果在不考虑性能因素下，可以直接使用babel-polyfill，但如果项目中引入了其他库，的了解这些库有没有引入babel-polyfill，不然会造成全局变量混乱或其他错误")]),s._v(" "),a("li",[s._v("如果考虑性能又想使用实例方法，那可以将"),a("strong",[s._v("babel-runtime")]),s._v("、"),a("strong",[s._v("babel-plugin-transform-runtime")]),s._v("和"),a("strong",[s._v("core-js")]),s._v("结合使用。")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);